# 1. Certifique-se que est√° no diret√≥rio correto
cd ~/escaleta-hub/public

# 2. Crie o arquivo HTML completo
cat > index.html << 'EOF'
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Escaleta Hub - Plataforma de Roteiristas</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCsi6yy41s8DgT88lPRtlLKQFFYrgAgMSo",
      authDomain: "escaleta-hub.firebaseapp.com",
      projectId: "escaleta-hub",
      storageBucket: "escaleta-hub.firebasestorage.app",
      messagingSenderId: "825021624145",
      appId: "1:825021624145:web:1f43b9574d041d8e206d70",
      measurementId: "G-NC9QFD3063"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    const db = getFirestore(app);
    
    // Torna as vari√°veis globais para o resto do c√≥digo
    window.firebaseApp = app;
    window.firebaseAuth = auth;
    window.firebaseDb = db;
    window.firebaseAnalytics = analytics;
    window.firebaseFunctions = {
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      signOut,
      onAuthStateChanged,
      doc,
      setDoc,
      getDoc,
      serverTimestamp
    };
    
    console.log("‚úÖ Firebase configurado com sucesso!");
  </script>

  <style>
    /* ===== VARI√ÅVEIS DE CORES ===== */
    :root {
      --primary: #1a3650;
      --secondary: #ff7b25;
      --accent: #41b883;
      --light: #f0f7ff;
      --dark: #0f1f2f;
      --text: #2c3e50;
      --bg: #f8fbff;
    }

    /* ===== ESTILOS GERAIS ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }

    /* ===== TELA DE LOGIN ===== */
    .login-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .login-box {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      width: 90%;
      max-width: 400px;
      text-align: center;
    }

    .logo-container h1 {
      color: var(--secondary);
      margin-bottom: 0.5rem;
      font-size: 2.5rem;
    }

    .form-group {
      margin-bottom: 1rem;
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--dark);
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }

    .login-btn {
      width: 100%;
      padding: 12px;
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 1rem;
    }

    .error-message {
      color: #ff6b6b;
      text-align: center;
      margin: 10px 0;
      display: none;
    }

    /* ===== PLATAFORMA PRINCIPAL ===== */
    .platform {
      display: none;
      height: 100vh;
      flex-direction: column;
    }

    header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .script-editor {
      flex: 1;
      padding: 2rem;
      background: white;
      font-family: 'Courier New', monospace;
      font-size: 12pt;
      line-height: 1.6;
      min-height: 500px;
      border: none;
      outline: none;
    }

    .save-status {
      position: fixed;
      bottom: 20px;
      left: 20px;
      padding: 10px 15px;
      border-radius: 5px;
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
  </style>
</head>
<body>
  <!-- Tela de Login -->
  <div id="loginScreen" class="login-screen">
    <div class="login-box">
      <div class="logo-container">
        <h1>üé¨ Escaleta Hub</h1>
        <p>Sua plataforma profissional de roteiros</p>
      </div>

      <div class="login-form">
        <h2>Entrar na Plataforma</h2>

        <div class="form-group">
          <label for="email">E-mail:</label>
          <input type="email" id="email" placeholder="seu@email.com">
        </div>

        <div class="form-group">
          <label for="password">Senha:</label>
          <input type="password" id="password" placeholder="Sua senha">
        </div>

        <div id="errorMessage" class="error-message"></div>

        <button id="loginBtn" class="login-btn">
          <i class="fas fa-sign-in-alt"></i> Entrar na Plataforma
        </button>

        <p style="text-align: center; margin-top: 1rem; color: #666;">
          N√£o tem conta? <a href="#" id="showRegister" style="color: var(--secondary);">Cadastre-se aqui</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Plataforma Principal -->
  <div id="platform" class="platform">
    <header>
      <div style="display: flex; align-items: center; gap: 1rem;">
        <div style="font-size: 1.5rem; font-weight: bold;">
          <i class="fas fa-scroll"></i> Escaleta Hub
        </div>
        <div>
          <input type="text" id="documentTitle" value="Meu Roteiro" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 5px 10px; border-radius: 4px;">
          <div style="font-size: 0.9rem;">
            <span id="sceneCount">0 cenas</span> ‚Ä¢ 
            <span id="wordCount">0 palavras</span>
          </div>
        </div>
      </div>

      <div style="display: flex; gap: 0.5rem;">
        <button id="saveBtn" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
          <i class="fas fa-save"></i> Salvar
        </button>
        <button id="logoutBtn" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </header>

    <div style="display: flex; flex: 1; overflow: hidden;">
      <!-- Menu Lateral -->
      <nav style="width: 250px; background: var(--dark); color: white; padding: 1rem;">
        <div style="margin-bottom: 2rem;">
          <h3><i class="fas fa-film"></i> Roteiro</h3>
          <button style="display: flex; align-items: center; gap: 0.5rem; padding: 0.8rem; width: 100%; background: var(--secondary); border: none; color: white; text-align: left; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-file-alt"></i> Editor
          </button>
        </div>
        
        <div style="margin-bottom: 2rem;">
          <h3><i class="fas fa-cog"></i> Ferramentas</h3>
          <button id="nightModeBtn" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.8rem; width: 100%; background: transparent; border: none; color: white; text-align: left; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-moon"></i> Modo Noturno
          </button>
        </div>
      </nav>

      <!-- Editor -->
      <main style="flex: 1; display: flex; flex-direction: column;">
        <div style="background: white; padding: 1rem; border-bottom: 1px solid #ddd;">
          <button id="newSceneBtn" style="padding: 8px 15px; background: var(--light); border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-plus"></i> Nova Cena
          </button>
        </div>
        
        <div class="script-editor" contenteditable="true" id="scriptEditor">
          <div style="font-weight: bold; text-transform: uppercase; margin: 1.5rem 0 0.5rem 0; color: var(--primary);">INT. CASA - DIA</div>
          <div style="margin: 0.5rem 0;">Uma casa aconchegante. JO√ÉO est√° sentado no sof√°, olhando pela janela.</div>
          <div style="text-align: center; width: 50%; margin: 1rem auto; font-weight: bold;">JO√ÉO</div>
          <div style="width: 60%; margin: 0.5rem auto;">Onde ser√° que ela est√°? J√° era para ter chegado.</div>
        </div>
      </main>
    </div>
  </div>

  <!-- Status de Autosave -->
  <div id="saveStatus" class="save-status" style="display: none;">
    <i class="fas fa-check"></i> <span id="statusText">Salvo</span>
  </div>

  <script>
    // ===== SISTEMA PRINCIPAL =====
    class EscaletaHub {
      constructor() {
        this.currentUser = null;
        this.saveTimer = null;
        this.init();
      }

      init() {
        // Aguardar o Firebase carregar
        setTimeout(() => {
          this.setupAuthListener();
          this.setupLogin();
          this.setupEditor();
          this.setupVisualModes();
          console.log("üé¨ Escaleta Hub inicializado!");
        }, 1000);
      }

      // === SISTEMA DE AUTENTICA√á√ÉO ===
      setupAuthListener() {
        if (!window.firebaseAuth) {
          console.error("Firebase n√£o carregou corretamente");
          return;
        }

        window.firebaseFunctions.onAuthStateChanged(window.firebaseAuth, (user) => {
          if (user) {
            this.currentUser = user;
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('platform').style.display = 'flex';
            this.loadUserScript(user.uid);
            this.updateStats();
            console.log("‚úÖ Usu√°rio logado:", user.email);
          } else {
            this.currentUser = null;
            document.getElementById('platform').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
          }
        });
      }

      setupLogin() {
        document.getElementById('loginBtn').addEventListener('click', () => {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;
          
          if (!email || !password) {
            this.showError('Por favor, preencha e-mail e senha!');
            return;
          }
          
          window.firebaseFunctions.signInWithEmailAndPassword(
            window.firebaseAuth, email, password
          ).catch((error) => {
            this.showError('Erro no login: ' + error.message);
          });
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
          window.firebaseFunctions.signOut(window.firebaseAuth);
        });

        document.getElementById('showRegister').addEventListener('click', (e) => {
          e.preventDefault();
          this.showRegisterForm();
        });
      }

      showRegisterForm() {
        const email = prompt("Digite seu e-mail para cadastro:");
        const password = prompt("Digite uma senha (m√≠nimo 6 caracteres):");
        
        if (!email || !password) {
          alert("Cadastro cancelado.");
          return;
        }

        if (password.length < 6) {
          alert("A senha deve ter pelo menos 6 caracteres.");
          return;
        }

        window.firebaseFunctions.createUserWithEmailAndPassword(
          window.firebaseAuth, email, password
        ).then(() => {
          alert("Conta criada com sucesso! Fa√ßa login.");
        }).catch((error) => {
          alert("Erro no cadastro: " + error.message);
        });
      }

      // === SISTEMA DE AUTOSAVE ===
      async loadUserScript(uid) {
        try {
          const docRef = window.firebaseFunctions.doc(window.firebaseDb, "scripts", uid);
          const docSnap = await window.firebaseFunctions.getDoc(docRef);
          
          if (docSnap.exists()) {
            document.getElementById('scriptEditor').innerHTML = docSnap.data().content;
            this.showSaveStatus('√öltimo roteiro carregado', 'success');
          }
        } catch (error) {
          console.error("Erro ao carregar roteiro:", error);
        }
      }

      debounce(func, delay) {
        let timer;
        return function(...args) {
          clearTimeout(timer);
          timer = setTimeout(() => func.apply(this, args), delay);
        };
      }

      saveScript = this.debounce(async (uid, content) => {
        this.showSaveStatus('Salvando...', 'saving');
        
        try {
          const docRef = window.firebaseFunctions.doc(window.firebaseDb, "scripts", uid);
          await window.firebaseFunctions.setDoc(docRef, { 
            content: content,
            updatedAt: window.firebaseFunctions.serverTimestamp(),
            title: document.getElementById('documentTitle').value
          });
          
          this.showSaveStatus('Salvo automaticamente', 'success');
        } catch (error) {
          this.showSaveStatus('Erro ao salvar', 'error');
          console.error("Erro ao salvar:", error);
        }
      }, 2000);

      showSaveStatus(text, type) {
        const status = document.getElementById('saveStatus');
        const statusText = document.getElementById('statusText');
        
        statusText.textContent = text;
        status.style.display = 'block';
        
        if (type === 'success') {
          status.style.background = '#d4edda';
          status.style.color = '#155724';
          status.style.borderColor = '#c3e6cb';
        } else if (type === 'saving') {
          status.style.background = '#fff3cd';
          status.style.color = '#856404';
          status.style.borderColor = '#ffeaa7';
        } else {
          status.style.background = '#f8d7da';
          status.style.color = '#721c24';
          status.style.borderColor = '#f5c6cb';
        }
        
        if (type === 'success') {
          setTimeout(() => {
            status.style.display = 'none';
          }, 3000);
        }
      }

      // === EDITOR DE ROTEIRO ===
      setupEditor() {
        const editor = document.getElementById('scriptEditor');
        const newSceneBtn = document.getElementById('newSceneBtn');
        const saveBtn = document.getElementById('saveBtn');

        newSceneBtn.addEventListener('click', () => {
          const newScene = document.createElement('div');
          newScene.style.fontWeight = 'bold';
          newScene.style.textTransform = 'uppercase';
          newScene.style.margin = '1.5rem 0 0.5rem 0';
          newScene.style.color = 'var(--primary)';
          newScene.contentEditable = true;
          newScene.textContent = 'INT. NOVA CENA - DIA';
          editor.appendChild(newScene);
          newScene.focus();
        });

        saveBtn.addEventListener('click', () => {
          if (this.currentUser) {
            this.saveScript(this.currentUser.uid, editor.innerHTML);
          }
        });

        editor.addEventListener('input', () => {
          this.updateStats();
          if (this.currentUser) {
            this.saveScript(this.currentUser.uid, editor.innerHTML);
          }
        });

        this.updateStats();
      }

      updateStats() {
        const text = document.getElementById('scriptEditor').innerText;
        const scenes = (text.match(/INT\.|EXT\./g) || []).length;
        const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
        
        document.getElementById('sceneCount').textContent = scenes + ' cenas';
        document.getElementById('wordCount').textContent = words + ' palavras';
      }

      // === MODO NOTURNO ===
      setupVisualModes() {
        document.getElementById('nightModeBtn').addEventListener('click', () => {
          document.body.classList.toggle('night-mode');
          
          if (document.body.classList.contains('night-mode')) {
            document.body.style.backgroundColor = '#1a1a1a';
            document.body.style.color = 'white';
          } else {
            document.body.style.backgroundColor = '';
            document.body.style.color = '';
          }
        });
      }

      showError(msg) {
        const errorElement = document.getElementById('errorMessage');
        errorElement.textContent = msg;
        errorElement.style.display = 'block';
        setTimeout(() => {
          errorElement.style.display = 'none';
        }, 5000);
      }
    }

    // Inicializar quando a p√°gina carregar
    window.addEventListener('DOMContentLoaded', () => {
      new EscaletaHub();
    });
  </script>
</body>
</html>
EOF

<!-- Painel de Personagens -->
<section id="charactersPanel" style="display: none;">
    <h3><i class="fas fa-users"></i> Personagens</h3>
    <div id="charactersList"></div>
    <button id="addCharacterBtn">+ Novo Personagem</button>
</section>

<!-- Timeline de Cenas -->
<section id="timelinePanel" style="display: none;">
    <h3><i class="fas fa-list-ol"></i> Timeline</h3>
    <div id="scenesList"></div>
</section>


