<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Escaleta Hub  - Plataforma Profissional</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <style>
    /* ===== VARIÁVEIS DE CORES ===== */
    :root {
      --primary: #2a5a78;
      --secondary: #9c6ade;
      --accent: #41b883;
      --light: #f0f7ff;
      --dark: #1a3650;
      --text: #2c3e50;
      --bg: #f8fbff;
      --header-bg: linear-gradient(135deg, #2a5a78 0%, #1a3650 100%);
      --sidebar-bg: #3a4f66;
      --editor-bg: #ffffff;
      --editor-text: #2c3e50;
      --footer-bg: #2a5a78;
      --footer-text: #e0f0ff;
      --success: #41b883;
      --warning: #ffba5a;
      --danger: #ff6b6b;
    }

    /* ===== ESTILOS GERAIS ===== */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background-color:var(--bg); color:var(--text); overflow-x:hidden; }

    /* ===== TELA DE ABERTURA STREAMING ===== */
    .opening-screen {
        position: fixed; top:0; left:0; width:100%; height:100%;
        background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.9) 100%), #000;
        display:flex; flex-direction:column; justify-content:center; align-items:center;
        z-index:1000; transition: opacity 1s ease-out;
    }
    .logo-container { margin-bottom:40px; text-align:center; animation:fadeIn 2s ease forwards; }
    .logo { font-size:48px; font-weight:bold; color:#e50914; text-transform:uppercase; letter-spacing:5px; margin-bottom:10px; }
    .tagline { font-size:18px; color:#aaa; margin-top:10px; }
    .login-form {
        background-color: rgba(0,0,0,0.75); padding:40px; border-radius:8px; width:100%; max-width:450px;
        animation: scaleUp 0.5s ease forwards;
    }
    .login-form h2 { margin-bottom:28px; font-size:32px; font-weight:500; text-align:center; }
    .form-group { margin-bottom:16px; }
    .form-group label { display:block; margin-bottom:8px; font-size:14px; color:#aaa; }
    .form-group input {
        width:100%; height:50px; padding:0 16px; background:#333; border:none; border-radius:4px;
        color:#fff; font-size:16px;
    }
    .form-group input:focus { background:#454545; outline:none; }
    .login-btn {
        width:100%; height:50px; background:#e50914; color:#fff; border:none; border-radius:4px;
        font-size:16px; font-weight:bold; margin-top:24px; cursor:pointer; transition: background 0.2s;
    }
    .login-btn:hover { background:#f40612; }
    .error-message { color: #ff6b6b; margin-top: 10px; text-align: center; display: none; }

    @keyframes fadeIn { from {opacity:0;} to{opacity:1;} }
    @keyframes scaleUp { from{transform:scale(0.8); opacity:0;} to{transform:scale(1); opacity:1;} }

    /* ===== PLATAFORMA PRINCIPAL ===== */
    .platform { display:none; height:100vh; flex-direction:column; }

    /* ===== CABEÇALHO ===== */
    header { 
        background:var(--header-bg); color:white; padding:1rem 2rem; 
        display:flex; justify-content:space-between; align-items:center; 
        box-shadow:0 2px 10px rgba(0,0,0,0.2); 
    }
    .header-left { display:flex; align-items:center; gap:1rem; }
    .logo-platform { font-size:1.5rem; font-weight:bold; display:flex; align-items:center; gap:0.5rem; }
    .document-info { display:flex; flex-direction:column; }
    .document-title { 
        font-weight:bold; font-size:1.2rem; border:none; 
        background:rgba(255,255,255,0.2); color:white; 
        padding:5px 10px; border-radius:4px; width:200px; 
    }
    .document-stats { font-size:0.9rem; opacity:0.9; }

    .header-right { display:flex; gap:0.5rem; }
    .header-btn { 
        background:rgba(255,255,255,0.2); color:white; border:none; 
        padding:8px 15px; border-radius:4px; cursor:pointer; 
        display:flex; align-items:center; gap:0.5rem; 
    }
    .header-btn:hover { background:rgba(255,255,255,0.3); }

    /* ===== LAYOUT PRINCIPAL ===== */
    .main-container { display:flex; flex:1; overflow:hidden; }

    /* ===== MENU LATERAL ===== */
    .sidebar { width:250px; background:var(--sidebar-bg); color:#e0f0ff; padding:1rem; }
    .sidebar-section { margin-bottom:1.5rem; }
    .sidebar-section h3 { 
        margin-bottom:0.8rem; font-size:1rem; color:#bdc3c7; 
        display:flex; align-items:center; gap:0.5rem; 
    }
    .sidebar-btn { 
        display:flex; align-items:center; gap:0.5rem; padding:0.7rem; width:100%;
        background:transparent; border:none; color:#e0f0ff; text-align:left; border-radius:4px;
        cursor:pointer; margin-bottom:0.3rem; font-weight:bold; 
    }
    .sidebar-btn:hover { background:#4a5f76; }
    .sidebar-btn.active { background:var(--secondary); }

    /* ===== ÁREA DE TRABALHO ===== */
    .workspace { flex:1; display:flex; flex-direction:column; background:var(--bg); }
    .tab-header { 
        display:flex; background:var(--light); border-bottom:1px solid #d0e0f0; 
        padding:0 20px; overflow-x: auto; 
    }
    .tab-button { 
        padding:12px 20px; background:transparent; border:none; cursor:pointer;
        color:var(--text); position:relative; white-space: nowrap;
    }
    .tab-button.active { color:var(--secondary); font-weight:bold; }
    .tab-button.active::after { 
        content:''; position:absolute; bottom:0; left:0;
        width:100%; height:3px; background:var(--secondary); 
    }
    .tab-content { flex:1; display:none; overflow:auto; padding:20px; }
    .tab-content.active { display:block; }

    /* ===== EDITOR DE ROTEIRO ===== */
    .editor-toolbar { 
        background:white; padding:1rem; border-bottom:1px solid #ddd; 
        display:flex; gap:1rem; flex-wrap:wrap; 
    }
    .tool-btn { 
        padding:8px 15px; background:var(--light); border:1px solid #ddd; 
        border-radius:4px; cursor:pointer; display:flex; align-items:center; gap:0.5rem; 
    }
    .script-editor { 
        flex:1; padding:2rem; background:var(--editor-bg); color:var(--editor-text); 
        overflow-y:auto; font-family:'Courier New', monospace; font-size:12pt; line-height:1.5;
        min-height:500px; 
    }
    .scene-heading { font-weight:bold; text-transform:uppercase; margin-top:1.5rem; color:var(--primary); }
    .character { text-align:center; width:50%; margin:0.8rem auto; font-weight:bold; }
    .dialogue { width:60%; margin:0 auto; }
    .action { margin:0.8rem 0; }

    /* ===== STORYBOARD ===== */
    .storyboard-container { 
        display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));
        gap:20px; padding:15px; 
    }
    .storyboard-item { 
        border:1px solid #d0e0f0; border-radius:8px; overflow:hidden;
        background:white; box-shadow:0 2px 6px rgba(0,0,0,0.05); 
    }
    .storyboard-canvas { 
        width:100%; height:150px; background:#f0f7ff;
        display:flex; align-items:center; justify-content:center; cursor:crosshair; 
    }

    /* ===== VIDEOCHAMADA ===== */
    .video-container { display:grid; grid-template-columns:1fr 1fr; gap:20px; padding:20px; }
    .video-placeholder { 
        background:#333; border-radius:8px; display:flex;
        align-items:center; justify-content:center; color:white; min-height:300px; 
    }
    .video-controls { display:flex; gap:10px; justify-content:center; margin-top:20px; }
    .video-controls button { 
        padding:10px 20px; border:none; border-radius:5px;
        cursor:pointer; background:var(--primary); color:white; 
    }

    /* ===== CHAT ===== */
    .chat-container { display:flex; flex-direction:column; height:500px; }
    .chat-messages { 
        flex:1; border:1px solid #d0e0f0; border-radius:8px;
        padding:15px; overflow-y:auto; margin-bottom:15px; background:white; 
    }
    .message { margin-bottom:10px; padding:8px; border-radius:5px; background:#f0f7ff; }
    .chat-input { display:flex; gap:10px; }
    .chat-input input { flex:1; padding:10px; border:1px solid #d0e0f0; border-radius:5px; }
    .chat-input button { 
        padding:10px 20px; background:var(--accent); color:white;
        border:none; border-radius:5px; cursor:pointer; 
    }

    /* ===== IA ASSISTENTE ===== */
    .ai-assistant { background:white; border-radius:8px; padding:20px; margin-top:20px; }
    .ai-suggestions { margin-top:15px; }
    .suggestion { 
        background:#f0f7ff; padding:10px; margin:5px 0; border-radius:5px;
        cursor:pointer; border-left:4px solid var(--accent); 
    }

    /* ===== FLUTUANTES ===== */
    .floating-icons { 
        position:fixed; bottom:30px; right:30px; display:flex;
        flex-direction:column; gap:15px; z-index:999; 
    }
    .floating-icon { 
        width:60px; height:60px; border-radius:50%; display:flex;
        align-items:center; justify-content:center; color:white; font-size:24px;
        cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.2); 
    }
    .icon-video { background:var(--secondary); }
    .icon-chat { background:var(--accent); }
    .icon-ai { background:var(--primary); }

    /* ===== MODAIS ===== */
    .modal { 
        display:none; position:fixed; top:0; left:0; width:100%; height:100%;
        background:rgba(0,0,0,0.6); z-index:1000; align-items:center; justify-content:center; 
    }
    .modal-content { 
        background:white; border-radius:12px; width:90%; max-width:600px;
        overflow:hidden; box-shadow:0 10px 25px rgba(0,0,0,0.2); 
    }
    .modal-header { 
        background:var(--primary); color:white; padding:15px;
        display:flex; justify-content:space-between; align-items:center; 
    }
    .modal-body { padding:20px; max-height:80vh; overflow-y:auto; }

    footer { 
        background:var(--footer-bg); color:var(--footer-text); padding:0.8rem 1.5rem;
        display:flex; justify-content:space-between; align-items:center; 
    }

    /* ===== NOVAS FUNCIONALIDADES ===== */
    .docs-style-container { display:flex; flex-direction:column; height:100%; background:#f8f9fa; }
    .docs-menu-bar { display:flex; align-items:center; padding:8px 16px; background:white; border-bottom:1px solid #e0e0e0; }
    .docs-title-input { font-size:18px; font-weight:500; border:none; padding:8px 12px; margin-right:auto; background:transparent; color:#202124; width:300px; }
    .docs-menu-item { display:flex; align-items:center; padding:6px 12px; margin:0 4px; border:none; background:transparent; cursor:pointer; border-radius:4px; color:#5f6368; font-size:14px; }
    .docs-menu-item:hover { background:#f1f3f4; }
    .docs-toolbar { display:flex; flex-wrap:wrap; padding:8px 16px; background:white; border-bottom:1px solid #e0e0e0; }
    .docs-toolbar-group { display:flex; align-items:center; margin-right:16px; padding-right:16px; border-right:1px solid #e0e0e0; }
    .docs-toolbar-button { width:36px; height:36px; display:flex; align-items:center; justify-content:center; border:none; background:transparent; border-radius:4px; cursor:pointer; color:#5f6368; margin:0 2px; }
    .docs-toolbar-button:hover { background:#f1f3f4; }
    .docs-toolbar-select { height:36px; border:none; background:transparent; padding:0 8px; margin:0 4px; border-radius:4px; cursor:pointer; color:#5f6368; }
    .docs-editor-container { flex:1; display:flex; overflow:auto; background:#f8f9fa; justify-content:center; padding:20px; }
    .docs-editor { width:816px; min-height:1056px; padding:96px; background:white; box-shadow:0 1px 3px 1px rgba(60,64,67,0.15); margin-bottom:20px; }
    .docs-editor-content { width:100%; min-height:100%; outline:none; font-size:12pt; line-height:1.5; color:#202124; }
    .docs-status-bar { display:flex; align-items:center; padding:8px 16px; background:white; border-top:1px solid #e0e0e0; color:#5f6368; font-size:12px; }
    .docs-page-actions { margin-left:auto; display:flex; align-items:center; }
    .docs-page-button { width:32px; height:32px; display:flex; align-items:center; justify-content:center; border:none; background:transparent; border-radius:4px; cursor:pointer; color:#5f6368; margin:0 2px; }
    .docs-page-button:hover { background:#f1f3f4; }

    @media (max-width: 900px) {
        .main-container { flex-direction:column; }
        .sidebar { width:100%; }
        .video-container { grid-template-columns:1fr; }
        .header-right { flex-direction:column; }
        .docs-editor { width:100%; padding:20px; }
        .docs-toolbar-group { margin-right:8px; padding-right:8px; }
    }
  </style>
</head>
<body>
    <!-- Tela de Abertura Estilo Streaming -->
    <div class="opening-screen" id="openingScreen">
        <div class="logo-container">
            <div class="logo">ESCALETA HUB PRO</div>
            <div class="tagline">Sua plataforma profissional de criação de roteiros</div>
        </div>
        
        <div class="login-form">
            <h2>Olá, Roteirista!</h2>
            <div class="form-group">
                <label for="email">E-mail</label>
                <input type="email" id="email" placeholder="seu@email.com">
            </div>
            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" id="password" placeholder="Sua senha">
            </div>
            <div class="error-message" id="error-message"></div>
            <button class="login-btn" id="loginBtn">Entrar</button>
            <p style="text-align: center; margin-top: 15px; color: #aaa;">
                Não tem conta? <a href="#" style="color: #e50914;" id="register-link">Cadastre-se</a>
            </p>
        </div>
    </div>

    <!-- Plataforma Principal -->
    <div class="platform" id="platform">
        <header>
            <div class="header-left">
                <div class="logo-platform"><i class="fas fa-scroll"></i> Escaleta Hub Pro</div>
                <div class="document-info">
                    <input type="text" id="documentTitle" class="document-title" value="Meu Roteiro">
                    <div class="document-stats">
                        <span id="sceneCount">0 cenas</span> • 
                        <span id="wordCount">0 palavras</span> •
                        <span id="onlineUsers">1 online</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <button id="saveBtn" class="header-btn">
                    <i class="fas fa-save"></i> Salvar
                </button>
                <button id="userBtn" class="header-btn">
                    <i class="fas fa-user"></i> <span id="userName">Usuário</span>
                </button>
                <button id="logoutBtn" class="header-btn">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </div>
        </header>

        <div class="main-container">
            <!-- Menu Lateral -->
            <nav class="sidebar">
                <div class="sidebar-section">
                    <h3><i class="fas fa-film"></i> Roteiro</h3>
                    <button class="sidebar-btn active" data-tab="roteiro">
                        <i class="fas fa-file-alt"></i> Editor
                    </button>
                    <button class="sidebar-btn" data-tab="storyboard">
                        <i class="fas fa-palette"></i> Storyboard
                    </button>
                    <button class="sidebar-btn" data-tab="escaleta">
                        <i class="fas fa-list-ol"></i> Escaleta
                    </button>
                </div>

                <div class="sidebar-section">
                    <h3><i class="fas fa-users"></i> Colaboração</h3>
                    <button class="sidebar-btn" data-tab="video">
                        <i class="fas fa-video"></i> Videochamada
                    </button>
                    <button class="sidebar-btn" data-tab="chat">
                        <i class="fas fa-comments"></i> Chat
                    </button>
                </div>

                <div class="sidebar-section">
                    <h3><i class="fas fa-robot"></i> IA Assistente</h3>
                    <button class="sidebar-btn" data-tab="ai">
                        <i class="fas fa-magic"></i> Sugestões de IA
                    </button>
                </div>

                <div class="sidebar-section">
                    <h3><i class="fas fa-tools"></i> Ferramentas</h3>
                    <button class="sidebar-btn" data-tab="personagens">
                        <i class="fas fa-users"></i> Personagens
                    </button>
                    <button class="sidebar-btn" data-tab="estatisticas">
                        <i class="fas fa-chart-bar"></i> Estatísticas
                    </button>
                </div>
            </nav>

            <!-- Área de Trabalho -->
            <main class="workspace">
                <div class="tab-header">
                    <button class="tab-button active" data-tab="roteiro">Editor de Roteiro</button>
                    <button class="tab-button" data-tab="storyboard">Storyboard</button>
                    <button class="tab-button" data-tab="escaleta">Escaleta</button>
                    <button class="tab-button" data-tab="video">Videochamada</button>
                    <button class="tab-button" data-tab="chat">Chat</button>
                    <button class="tab-button" data-tab="ai">IA Assistente</button>
                    <button class="tab-button" data-tab="personagens">Personagens</button>
                    <button class="tab-button" data-tab="estatisticas">Estatísticas</button>
                </div>

                <!-- Aba: Editor de Roteiro -->
                <div id="roteiro" class="tab-content active">
                    <div class="editor-toolbar">
                        <button id="newSceneBtn" class="tool-btn">
                            <i class="fas fa-plus"></i> Nova Cena
                        </button>
                        <button id="exportBtn" class="tool-btn">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                        <button id="aiSuggestBtn" class="tool-btn">
                            <i class="fas fa-robot"></i> Sugerir com IA
                        </button>
                        <button id="nightMode" class="tool-btn">
                            <i class="fas fa-moon"></i> Modo Noturno
                        </button>
                    </div>
                    <div class="script-editor" contenteditable="true" id="scriptEditor">
                        <div class="scene-heading">INT. CASA - DIA</div>
                        <div class="action">
                            Uma casa aconchegante. JOÃO está sentado no sofá, olhando pela janela.
                        </div>
                        <div class="character">JOÃO</div>
                        <div class="dialogue">
                            Onde será que ela está? Já era para ter chegado.
                        </div>
                    </div>
                </div>

                <!-- Aba: Storyboard -->
                <div id="storyboard" class="tab-content">
                    <div class="storyboard-controls">
                        <button id="addFrameBtn" class="tool-btn">
                            <i class="fas fa-plus"></i> Adicionar Frame
                        </button>
                        <button id="clearCanvasBtn" class="tool-btn">
                            <i class="fas fa-trash"></i> Limpar
                        </button>
                    </div>
                    <div class="storyboard-container" id="storyboardContainer">
                        <!-- Frames serão adicionados dinamicamente -->
                    </div>
                </div>

                <!-- Aba: Escaleta (Novo Estilo Google Docs) -->
                <div id="escaleta" class="tab-content">
                    <div class="docs-style-container">
                        <div class="docs-menu-bar">
                            <input type="text" class="docs-title-input" value="Minha Escaleta" placeholder="Digite o título da escaleta">
                            <button class="docs-menu-item"><i class="fas fa-file"></i> Arquivo</button>
                            <button class="docs-menu-item"><i class="fas fa-edit"></i> Editar</button>
                            <button class="docs-menu-item"><i class="fas fa-eye"></i> Visualizar</button>
                            <button class="docs-menu-item"><i class="fas fa-share-alt"></i> Compartilhar</button>
                        </div>
                        
                        <div class="docs-toolbar">
                            <div class="docs-toolbar-group">
                                <select class="docs-toolbar-select">
                                    <option>Fonte</option>
                                    <option>Arial</option>
                                    <option>Times New Roman</option>
                                    <option>Courier New</option>
                                </select>
                                <select class="docs-toolbar-select">
                                    <option>12</option>
                                    <option>14</option>
                                    <option>16</option>
                                    <option>18</option>
                                </select>
                            </div>
                            
                            <div class="docs-toolbar-group">
                                <button class="docs-toolbar-button" title="Negrito"><i class="fas fa-bold"></i></button>
                                <button class="docs-toolbar-button" title="Itálico"><i class="fas fa-italic"></i></button>
                                <button class="docs-toolbar-button" title="Sublinhado"><i class="fas fa-underline"></i></button>
                            </div>
                            
                            <div class="docs-toolbar-group">
                                <button class="docs-toolbar-button" title="Alinhar à esquerda"><i class="fas fa-align-left"></i></button>
                                <button class="docs-toolbar-button" title="Centralizar"><i class="fas fa-align-center"></i></button>
                                <button class="docs-toolbar-button" title="Alinhar à direita"><i class="fas fa-align-right"></i></button>
                            </div>
                            
                            <div class="docs-toolbar-group">
                                <button class="docs-toolbar-button" title="Lista com marcadores"><i class="fas fa-list-ul"></i></button>
                                <button class="docs-toolbar-button" title="Lista numerada"><i class="fas fa-list-ol"></i></button>
                            </div>
                        </div>
                        
                        <div class="docs-editor-container">
                            <div class="docs-editor">
                                <div class="docs-editor-content" contenteditable="true">
                                    <h1>Escaleta - Episódio 1: O Início</h1>
                                    <p><strong>Cena 1:</strong> INT. CASA DE JOÃO - DIA</p>
                                    <p>João procura por documentos importantes. Ele parece ansioso e preocupado.</p>
                                    <p><strong>Cena 2:</strong> EXT. RUA - CONTÍNUO</p>
                                    <p>Maria caminha apressadamente pela rua, segurando uma pasta.</p>
                                    <p><strong>Cena 3:</strong> INT. CASA DE JOÃO - CONTÍNUO</p>
                                    <p>João ouve a campainha tocar e se dirige à porta.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="docs-status-bar">
                            <span>Modificado agora mesmo</span>
                            <div class="docs-page-actions">
                                <span>100%</span>
                                <button class="docs-page-button"><i class="fas fa-minus"></i></button>
                                <button class="docs-page-button"><i class="fas fa-plus"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba: Videochamada -->
                <div id="video" class="tab-content">
                    <div class="video-container">
                        <div class="video-placeholder" id="localVideo">
                            <i class="fas fa-video" style="font-size: 48px;"></i>
                            <p>Sua câmera</p>
                        </div>
                        <div class="video-placeholder" id="remoteVideo">
                            <i class="fas fa-user" style="font-size: 48px;"></i>
                            <p>Participante</p>
                        </div>
                    </div>
                    <div class="video-controls">
                        <button id="startCallBtn">
                            <i class="fas fa-phone"></i> Iniciar Chamada
                        </button>
                        <button id="endCallBtn" style="background: var(--danger);">
                            <i class="fas fa-phone-slash"></i> Encerrar
                        </button>
                    </div>
                </div>

                <!-- Aba: Chat -->
                <div id="chat" class="tab-content">
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message">
                                <strong>Sistema:</strong> Bem-vindo ao chat de colaboração!
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
                            <button id="sendMessageBtn">Enviar</button>
                        </div>
                    </div>
                </div>

                <!-- Aba: IA Assistente -->
                <div id="ai" class="tab-content">
                    <div class="ai-assistant">
                        <h3><i class="fas fa-robot"></i> Assistente de IA</h3>
                        <p>Solicite sugestões para melhorar seu roteiro:</p>
                        
                        <div class="chat-input">
                            <input type="text" id="aiPrompt" placeholder="Ex: Sugira um diálogo para...">
                            <button id="askAIBtn">Perguntar à IA</button>
                        </div>
                        
                        <div class="ai-suggestions" id="aiSuggestions">
                            <div class="suggestion" onclick="useSuggestion(this)">
                                💡 Sugerir desenvolvimento de personagem
                            </div>
                            <div class="suggestion" onclick="useSuggestion(this)">
                                🎭 Criar diálogo emocionante
                            </div>
                            <div class="suggestion" onclick="useSuggestion(this)">
                                🌅 Descrever cenário impactante
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba: Personagens -->
                <div id="personagens" class="tab-content">
                    <h2>Personagens</h2>
                    <div class="toolbar">
                        <button class="tool-btn" id="addCharacterBtn">
                            <i class="fas fa-plus"></i> Adicionar Personagem
                        </button>
                    </div>
                    <div id="charactersList">
                        <div class="character-card" style="background: white; padding: 15px; margin: 10px 0; border-radius: 8px;">
                            <h3>JOÃO</h3>
                            <p><strong>Idade:</strong> 35 anos</p>
                            <p><strong>Descrição:</strong> Protagonista determinado e inteligente</p>
                        </div>
                    </div>
                </div>

                <!-- Aba: Estatísticas -->
                <div id="estatisticas" class="tab-content">
                    <h2>Estatísticas do Roteiro</h2>
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3 id="totalScenes">0</h3>
                            <p>Cenas</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3 id="totalWords">0</h3>
                            <p>Palavras</p>
                        </div>
                        <div class="stat-card" style="background: white; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3 id="totalCharacters">0</h3>
                            <p>Personagens</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <footer>
            <div>
                <span id="currentTab">Roteiro</span> | 
                <span id="connectionStatus"><i class="fas fa-wifi"></i> Conectado</span>
            </div>
            <div>
                <span id="lastSaved">Modificado: agora</span>
            </div>
        </footer>

        <!-- Ícones Flutuantes -->
        <div class="floating-icons">
            <div class="floating-icon icon-video" id="quickVideoBtn">
                <i class="fas fa-video"></i>
            </div>
            <div class="floating-icon icon-chat" id="quickChatBtn">
                <i class="fas fa-comment"></i>
            </div>
            <div class="floating-icon icon-ai" id="quickAIBtn">
                <i class="fas fa-robot"></i>
            </div>
        </div>
    </div>

    <script>
        // ===== SISTEMA PRINCIPAL =====
        class EscaletaHubPro {
            constructor() {
                this.socket = null;
                this.currentUser = null;
                this.peerConnection = null;
                this.localStream = null;
                this.init();
            }

            init() {
                this.setupLogin();
                this.setupTabs();
                this.setupEditor();
                this.setupVideoCall();
                this.setupChat();
                this.setupAI();
                this.setupStoryboard();
                this.setupFloatingIcons();
                this.setupCharacters();
                this.setupStats();
            }

            // === SISTEMA DE LOGIN AVANÇADO ===
            setupLogin() {
                const loginBtn = document.getElementById('loginBtn');
                const logoutBtn = document.getElementById('logoutBtn');
                const registerLink = document.getElementById('register-link');
                
                loginBtn.addEventListener('click', () => {
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    if (!email || !password) {
                        this.showError('Por favor, preencha e-mail e senha!');
                        return;
                    }
                    
                    // Simular login bem-sucedido
                    this.currentUser = {
                        email: email,
                        name: email.split('@')[0]
                    };
                    
                    document.getElementById('openingScreen').style.opacity = '0';
                    
                    setTimeout(() => {
                        document.getElementById('openingScreen').style.display = 'none';
                        document.getElementById('platform').style.display = 'flex';
                        document.getElementById('userName').textContent = this.currentUser.name;
                        
                        // Conectar ao servidor (simulado)
                        this.connectToServer();
                        this.updateStats();
                    }, 800);
                });
                
                registerLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showRegisterForm();
                });
                
                logoutBtn.addEventListener('click', () => {
                    document.getElementById('platform').style.display = 'none';
                    document.getElementById('openingScreen').style.display = 'flex';
                    setTimeout(() => {
                        document.getElementById('openingScreen').style.opacity = '1';
                    }, 50);
                    this.currentUser = null;
                });
            }

            showRegisterForm() {
                const loginForm = document.querySelector('.login-form');
                loginForm.innerHTML = `
                    <h2>Criar Nova Conta</h2>
                    <div class="form-group">
                        <label for="registerName">Nome Completo</label>
                        <input type="text" id="registerName" placeholder="Seu nome completo">
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">E-mail</label>
                        <input type="email" id="registerEmail" placeholder="seu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Senha</label>
                        <input type="password" id="registerPassword" placeholder="Mínimo 6 caracteres">
                    </div>
                    <div class="error-message" id="registerError"></div>
                    <button class="login-btn" id="registerBtn">Criar Conta</button>
                    <p style="text-align: center; margin-top: 15px; color: #aaa;">
                        Já tem conta? <a href="#" style="color: #e50914;" id="backToLogin">Fazer Login</a>
                    </p>
                `;
                
                document.getElementById('registerBtn').addEventListener('click', () => this.registerUser());
                document.getElementById('backToLogin').addEventListener('click', (e) => {
                    e.preventDefault();
                    location.reload();
                });
            }

            registerUser() {
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const errorElement = document.getElementById('registerError');
                
                if (!name || !email || !password) {
                    this.showError('Por favor, preencha todos os campos.', errorElement);
                    return;
                }
                
                if (password.length < 6) {
                    this.showError('A senha deve ter pelo menos 6 caracteres.', errorElement);
                    return;
                }
                
                // Registro bem-sucedido
                this.showSuccess('Conta criada com sucesso! Redirecionando...');
                
                setTimeout(() => {
                    document.getElementById('openingScreen').style.display = 'none';
                    document.getElementById('platform').style.display = 'flex';
                    document.getElementById('userName').textContent = name;
                    this.connectToServer();
                    this.updateStats();
                }, 2000);
            }

            // === SISTEMA DE ABAS ===
            setupTabs() {
                const switchTab = (tabId) => {
                    // Esconder todas as abas
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // Mostrar aba selecionada
                    document.getElementById(tabId).classList.add('active');
                    
                    // Atualizar botões
                    document.querySelectorAll('.tab-button, .sidebar-btn').forEach(button => {
                        button.classList.remove('active');
                    });
                    
                    document.querySelectorAll(`[data-tab="${tabId}"]`).forEach(button => {
                        button.classList.add('active');
                    });
                    
                    document.getElementById('currentTab').textContent = 
                        document.querySelector(`[data-tab="${tabId}"]`).textContent;
                };
                
                document.querySelectorAll('.tab-button, .sidebar-btn[data-tab]').forEach(button => {
                    button.addEventListener('click', () => {
                        switchTab(button.getAttribute('data-tab'));
                    });
                });
            }

            // === EDITOR DE ROTEIRO ===
            setupEditor() {
                const editor = document.getElementById('scriptEditor');
                const newSceneBtn = document.getElementById('newSceneBtn');
                const saveBtn = document.getElementById('saveBtn');
                const exportBtn = document.getElementById('exportBtn');
                const nightModeBtn = document.getElementById('nightMode');
                
                newSceneBtn.addEventListener('click', () => {
                    const newScene = document.createElement('div');
                    newScene.className = 'scene-heading';
                    newScene.contentEditable = true;
                    newScene.textContent = 'INT. NOVA CENA - DIA';
                    editor.appendChild(newScene);
                    newScene.focus();
                    this.updateStats();
                });
                
                saveBtn.addEventListener('click', () => {
                    this.saveDocument();
                });
                
                exportBtn.addEventListener('click', () => {
                    this.exportScript();
                });
                
                nightModeBtn.addEventListener('click', () => {
                    document.body.classList.toggle('night-mode');
                    document.getElementById('nightMode').innerHTML = 
                        document.body.classList.contains('night-mode') ? 
                        '<i class="fas fa-sun"></i> Modo Claro' : 
                        '<i class="fas fa-moon"></i> Modo Noturno';
                });
                
                editor.addEventListener('input', () => {
                    this.updateStats();
                    this.autoSave();
                });
                
                // Atalhos de teclado
                document.addEventListener('keydown', (e) => {
                    if ((e.ctrlKey || e.metaKey)) {
                        switch(e.key) {
                            case 's':
                                e.preventDefault();
                                this.saveDocument();
                                break;
                            case 'n':
                                e.preventDefault();
                                newSceneBtn.click();
                                break;
                        }
                    }
                });
            }

            // === VIDEOCHAMADA (WebRTC) ===
            setupVideoCall() {
                const startCallBtn = document.getElementById('startCallBtn');
                const endCallBtn = document.getElementById('endCallBtn');
                
                startCallBtn.addEventListener('click', async () => {
                    try {
                        this.localStream = await navigator.mediaDevices.getUserMedia({
                            video: true,
                            audio: true
                        });
                        
                        const localVideo = document.getElementById('localVideo');
                        localVideo.innerHTML = '';
                        const videoElement = document.createElement('video');
                        videoElement.srcObject = this.localStream;
                        videoElement.autoplay = true;
                        videoElement.muted = true;
                        localVideo.appendChild(videoElement);
                        
                        this.showNotification('Chamada iniciada!');
                    } catch (error) {
                        this.showError('Erro ao acessar câmera/microfone: ' + error.message);
                    }
                });
                
                endCallBtn.addEventListener('click', () => {
                    if (this.localStream) {
                        this.localStream.getTracks().forEach(track => track.stop());
                        document.getElementById('localVideo').innerHTML = `
                            <i class="fas fa-video" style="font-size: 48px;"></i>
                            <p>Sua câmera</p>
                        `;
                    }
                    this.showNotification('Chamada encerrada');
                });
            }

            // === SISTEMA DE CHAT ===
            setupChat() {
                const chatInput = document.getElementById('chatInput');
                const sendMessageBtn = document.getElementById('sendMessageBtn');
                
                const sendMessage = () => {
                    const message = chatInput.value.trim();
                    if (message) {
                        this.addMessage(this.currentUser.name, message);
                        chatInput.value = '';
                        
                        // Simular resposta automática
                        setTimeout(() => {
                            this.addMessage('IA Assistente', 'Ótima ideia! Posso ajudar a desenvolver isso?');
                        }, 1000);
                    }
                };
                
                sendMessageBtn.addEventListener('click', sendMessage);
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendMessage();
                });
            }

            addMessage(sender, message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `<strong>${sender}:</strong> ${message}`;
                document.getElementById('chatMessages').appendChild(messageDiv);
                document.getElementById('chatMessages').scrollTop = 
                    document.getElementById('chatMessages').scrollHeight;
            }

            // === IA ASSISTENTE ===
            setupAI() {
                const askAIBtn = document.getElementById('askAIBtn');
                const aiPrompt = document.getElementById('aiPrompt');
                
                askAIBtn.addEventListener('click', () => {
                    const prompt = aiPrompt.value.trim();
                    if (prompt) {
                        this.generateAISuggestion(prompt);
                        aiPrompt.value = '';
                    }
                });
            }

            generateAISuggestion(prompt) {
                // Simular geração de IA
                const suggestions = [
                    "Sugiro desenvolver esse diálogo com mais emoção...",
                    "Que tal adicionar um conflito inesperado aqui?",
                    "O personagem poderia revelar um segredo nesse momento...",
                    "Sugiro uma descrição mais vívida do ambiente...",
                    "Esse é um ótimo momento para desenvolvimento de personagem..."
                ];
                
                const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                const suggestionDiv = document.createElement('div');
                suggestionDiv.className = 'suggestion';
                suggestionDiv.innerHTML = `🤖 ${randomSuggestion}`;
                suggestionDiv.onclick = () => this.useAISuggestion(randomSuggestion);
                
                document.getElementById('aiSuggestions').appendChild(suggestionDiv);
                this.showNotification('Sugestão de IA gerada!');
            }

            useAISuggestion(suggestion) {
                const editor = document.getElementById('scriptEditor');
                editor.innerHTML += `<div class="action">💡 ${suggestion}</div>`;
                this.updateStats();
            }

            // === STORYBOARD ===
            setupStoryboard() {
                const addFrameBtn = document.getElementById('addFrameBtn');
                const clearCanvasBtn = document.getElementById('clearCanvasBtn');
                const container = document.getElementById('storyboardContainer');
                
                addFrameBtn.addEventListener('click', () => {
                    this.addStoryboardFrame();
                });
                
                clearCanvasBtn.addEventListener('click', () => {
                    container.innerHTML = '';
                    this.addStoryboardFrame();
                });
                
                // Adicionar frame inicial
                this.addStoryboardFrame();
            }

            addStoryboardFrame() {
                const container = document.getElementById('storyboardContainer');
                const frameId = `frame-${Date.now()}`;
                
                const frameHTML = `
                    <div class="storyboard-item">
                        <canvas class="storyboard-canvas" id="${frameId}" width="250" height="150"></canvas>
                        <div class="storyboard-info">
                            <input type="text" placeholder="Descrição da cena..." style="width:100%; padding:5px;">
                        </div>
                    </div>
                `;
                
                container.innerHTML += frameHTML;
                
                // Configurar desenho no canvas
                setTimeout(() => {
                    this.setupCanvasDrawing(frameId);
                }, 100);
            }

            setupCanvasDrawing(canvasId) {
                const canvas = document.getElementById(canvasId);
                const ctx = canvas.getContext('2d');
                let painting = false;
                
                canvas.addEventListener('mousedown', (e) => {
                    painting = true;
                    ctx.beginPath();
                    ctx.moveTo(e.offsetX, e.offsetY);
                });
                
                canvas.addEventListener('mousemove', (e) => {
                    if (painting) {
                        ctx.lineTo(e.offsetX, e.offsetY);
                        ctx.stroke();
                    }
                });
                
                canvas.addEventListener('mouseup', () => {
                    painting = false;
                });
                
                canvas.addEventListener('mouseleave', () => {
                    painting = false;
                });
            }

            // === SISTEMA DE PERSONAGENS ===
            setupCharacters() {
                const addCharacterBtn = document.getElementById('addCharacterBtn');
                
                addCharacterBtn.addEventListener('click', () => {
                    this.addCharacter();
                });
            }

            addCharacter() {
                const charactersList = document.getElementById('charactersList');
                const characterId = `character-${Date.now()}`;
                
                const characterHTML = `
                    <div class="character-card" style="background: white; padding: 15px; margin: 10px 0; border-radius: 8px;">
                        <h3 contenteditable="true">NOVO PERSONAGEM</h3>
                        <p><strong>Idade:</strong> <span contenteditable="true">30 anos</span></p>
                        <p><strong>Descrição:</strong> <span contenteditable="true">Descreva o personagem...</span></p>
                        <button onclick="this.parentElement.remove()" style="background: var(--danger); color: white; border: none; padding: 5px 10px; border-radius: 4px; margin-top: 10px;">Remover</button>
                    </div>
                `;
                
                charactersList.innerHTML += characterHTML;
            }

            // === ESTATÍSTICAS ===
            setupStats() {
                // Atualizar estatísticas periodicamente
                setInterval(() => {
                    this.updateStats();
                }, 5000);
            }

            // === ÍCONES FLUTUANTES ===
            setupFloatingIcons() {
                document.getElementById('quickVideoBtn').addEventListener('click', () => {
                    this.switchTab('video');
                });
                
                document.getElementById('quickChatBtn').addEventListener('click', () => {
                    this.switchTab('chat');
                });
                
                document.getElementById('quickAIBtn').addEventListener('click', () => {
                    this.switchTab('ai');
                });
            }

            // === FUNÇÕES UTILITÁRIAS ===
            switchTab(tabId) {
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.sidebar-btn').forEach(btn => btn.classList.remove('active'));
                
                document.getElementById(tabId).classList.add('active');
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            }

            updateStats() {
                const text = document.getElementById('scriptEditor').innerText;
                const words = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
                const scenes = document.querySelectorAll('.scene-heading').length;
                const characters = document.querySelectorAll('.character-card').length;
                
                document.getElementById('wordCount').textContent = words + ' palavras';
                document.getElementById('sceneCount').textContent = scenes + ' cenas';
                document.getElementById('totalWords').textContent = words;
                document.getElementById('totalScenes').textContent = scenes;
                document.getElementById('totalCharacters').textContent = characters;
            }

            saveDocument() {
                document.getElementById('lastSaved').textContent = 'Modificado: ' + 
                    new Date().toLocaleTimeString();
                this.showNotification('✅ Roteiro salvo com sucesso!');
            }

            autoSave() {
                clearTimeout(this.autoSaveTimer);
                this.autoSaveTimer = setTimeout(() => {
                    this.saveDocument();
                }, 3000);
            }

            exportScript() {
                const content = document.getElementById('scriptEditor').innerText;
                const blob = new Blob([content], {type: 'text/plain'});
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = 'roteiro.txt';
                a.click();
                this.showNotification('📄 Roteiro exportado!');
            }

            connectToServer() {
                // Simular conexão com servidor
                this.showNotification('🌐 Conectado ao servidor');
                document.getElementById('connectionStatus').innerHTML = 
                    '<i class="fas fa-wifi"></i> Conectado';
            }

            showError(message, element = document.getElementById('error-message')) {
                element.textContent = message;
                element.style.display = 'block';
                setTimeout(() => {
                    element.style.display = 'none';
                }, 5000);
            }

            showSuccess(message) {
                const successDiv = document.createElement('div');
                successDiv.style.cssText = `
                    background: #27ae60;
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    text-align: center;
                    margin: 10px 0;
                `;
                successDiv.textContent = message;
                
                const form = document.querySelector('.login-form');
                form.insertBefore(successDiv, form.querySelector('.error-message'));
                
                setTimeout(() => successDiv.remove(), 3000);
            }

            showNotification(message) {
                // Criar notificação flutuante
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed; top: 20px; right: 20px; 
                    background: var(--success); color: white; 
                    padding: 15px; border-radius: 5px; z-index: 10000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                `;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // Inicializar a plataforma quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', () => {
            window.escaletaHub = new EscaletaHubPro();
            console.log('🎬 Escaleta Hub Pro inicializado!');
        });

        // Função global para uso em sugestões
        function useSuggestion(element) {
            if (window.escaletaHub) {
                window.escaletaHub.useAISuggestion(element.textContent);
            }
        }
    </script>
</body>
</html>




